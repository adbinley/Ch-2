}
beep("mario")
warnings()
save(postbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/postbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/postbreeding_weights.RData")
for(i in 142:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["postbreeding_migration_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["postbreeding_migration_end_dt"]]}
postbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
postbre_extent <- ebirdst_extent(ext,
t = postbre)
#breeding
postbre_abd <- ebirdst_subset(abd, ext = postbre_extent)
postbre_abd_mean <- calc(postbre_abd, mean)
postbre_vals <- getValues(postbre_abd_mean)%>%
na.omit()
weight_sum <- sum(postbre_vals)
postbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(postbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/postbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/postbreeding_weights.RData")
for(i in 171:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["postbreeding_migration_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["postbreeding_migration_end_dt"]]}
postbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
postbre_extent <- ebirdst_extent(ext,
t = postbre)
#breeding
postbre_abd <- ebirdst_subset(abd, ext = postbre_extent)
postbre_abd_mean <- calc(postbre_abd, mean)
postbre_vals <- getValues(postbre_abd_mean)%>%
na.omit()
weight_sum <- sum(postbre_vals)
postbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(postbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/postbreeding_weights.RData")
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
nonbreeding_weights <- list()
for(i in 1:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_migration_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
for(i in 1:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(nonbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
for(i in 54:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(nonbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
for(i in 120:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(nonbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
for(i in 183:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
library(beepr)
beep("mario")
library(beepr)
beep("mario")
save(nonbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
for(i in 221:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(nonbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
for(i in 232:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["nonbreeding_end_dt"]]}
nonbre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
nonbre_extent <- ebirdst_extent(ext,
t = nonbre)
#breeding
nonbre_abd <- ebirdst_subset(abd, ext = nonbre_extent)
nonbre_abd_mean <- calc(nonbre_abd, mean)
nonbre_vals <- getValues(nonbre_abd_mean)%>%
na.omit()
weight_sum <- sum(nonbre_vals)
nonbreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
prebreeding_weights <- list()
save(nonbreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
for(i in 1:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["prebreeding_migration_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["prebreeding_migration_end_dt"]]}
prebre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
prebre_extent <- ebirdst_extent(ext,
t = prebre)
#breeding
prebre_abd <- ebirdst_subset(abd, ext = prebre_extent)
prebre_abd_mean <- calc(prebre_abd, mean)
prebre_vals <- getValues(prebre_abd_mean)%>%
na.omit()
weight_sum <- sum(prebre_vals)
prebreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(prebreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/prebreeding_weights.RData")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
rm(nonbreeding_weights)
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_weights.RData")
rm(nonbreeding_weights)
load("D:/Allison/Big_data/eBird_outputs/prebreeding_weights.RData")
for(i in 71:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["prebreeding_migration_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["prebreeding_migration_end_dt"]]}
prebre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
prebre_extent <- ebirdst_extent(ext,
t = prebre)
#breeding
prebre_abd <- ebirdst_subset(abd, ext = prebre_extent)
prebre_abd_mean <- calc(prebre_abd, mean)
prebre_vals <- getValues(prebre_abd_mean)%>%
na.omit()
weight_sum <- sum(prebre_vals)
prebreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
save(prebreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/prebreeding_weights.RData")
library(ebirdst)
library(tidyverse)
library(raster)
ebirdst_species <- ebirdst_runs %>%
dplyr::select(c("species_code","run_name"))
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
my_species <- left_join(my_species, ebirdst_species, by = "species_code")
setwd("E:/eBird/data/raw/STEM")
load("D:/Allison/Big_data/eBird_outputs/prebreeding_weights.RData")
for(i in 161:238){
code <- my_species$species_code[i]
run_name <- my_species$run_name.y[i]
skip_to_next <- FALSE
tryCatch(
abd <- load_raster(product = "abundance", path = run_name), error = function(e){skip_to_next <<- TRUE})
if(skip_to_next) { next }
start <- my_species %>%
filter(species_code==code)%>%
{.[["prebreeding_migration_start_dt"]]}
end <- my_species %>%
filter(species_code==code)%>%
{.[["prebreeding_migration_end_dt"]]}
prebre <- c(start, end)
ext_vec <-  c(xmin = -12240259, xmax = -1344534,
ymin = -6945058, ymax = 9202317)
ext <- sf::st_bbox(ext_vec, crs = "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs")
prebre_extent <- ebirdst_extent(ext,
t = prebre)
#breeding
prebre_abd <- ebirdst_subset(abd, ext = prebre_extent)
prebre_abd_mean <- calc(prebre_abd, mean)
prebre_vals <- getValues(prebre_abd_mean)%>%
na.omit()
weight_sum <- sum(prebre_vals)
prebreeding_weights[[i]]<- weight_sum
#print(code)
print(i)
}
library(beepr)
beep("mario")
save(prebreeding_weights, file = "D:/Allison/Big_data/eBird_outputs/prebreeding_weights.RData")
load("D:/Allison/Big_data/eBird_outputs/breeding_exp_nobarren.RData")
View(breeding_exp)
#breeding_exp1 <- breeding_exp[breeding_exp != "reevir1"]too slow
breeding_exp1 <- breeding_exp[-114]
load("D:/Allison/Big_data/eBird_outputs/postbreeding_exp_nobarren.RData")
postbreeding_exp1 <- postbreeding_exp[-114]
load("D:/Allison/Big_data/eBird_outputs/nonbreeding_exp_nobarren.RData")
nonbreeding_exp1 <- nonbreeding_exp[-114]
load("D:/Allison/Big_data/eBird_outputs/prebreeding_exp_nobarren.RData")
prebreeding_exp1 <- prebreeding_exp[-114]
func <- function(x) {
c(mean = sum(x), se = sd(x)/sqrt(length(x)))
}
load("D:/Allison/Big_data/eBird_outputs/breeding_weights.RData")
View(breeding_weights)
names(breeding_weights) <- names
names(breeding) <- names
breeding <- lapply(breeding_exp1, func)
func <- function(x) {
c(mean = sum(x))#, se = sd(x)/sqrt(length(x)))
}
breeding <- lapply(breeding_exp1, func)
names(breeding) <- names
names(breeding) <- name_v
my_species <- read.csv("C:/Users/AllisonBinley/OneDrive - Carleton University/thesis/CH2_2021/data/bird_data_v4.csv")
names <- my_species$species_code
names <- names[-114]
breeding_weights <- breeding_weights[-114]
names(breeding_weights) <- names
View(breeding_weights)
load("D:/Allison/Big_data/eBird_outputs/breeding_weights.RData")
View(breeding_weights)
breeding_weights1 <- breeding_weights[-114]
View(breeding_weights1)
names(breeding_weights) <- names
View(breeding_weights1)
names(breeding_weights) <- names
View(breeding_weights1)
